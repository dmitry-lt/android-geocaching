#summary Функциональная спецификация экрана поиска по карте
#labels Phase-Requirements

= Определение положения =

== Ограничения на провайдеров положения ==
В методе `onResume` проверяется включен ли самый точный провайдер и, если он выключен, экран блокируется диалогом включения gps. Если пользователь нажимает "Да", то открываются стандартные настройки определения положения, иначе активити финишируется.

== Индикация ==
При старте активити, если нет [http://code.google.com/p/android-geocaching/wiki/SearchMapActivity#Точное_положение точного] положения, отображается прогресс бар и статусная строчка о спутниках. Как только определится положение - они исчезают.
После первого фикса прогресс бар и статусная строка не отображаются до тех пор, пока не изменится [LocationManager#onStatusChanged статус]. Они снова исчезнут при очередном определении положения.

Если определено положение, то расстояние до тайника отображается целым числом в метрах, если оно меньше 1000 метров, иначе с одним знаком после запятой в километрах. Если положение определено не точно, то перед расстоянием также выводится знак приближённо равно (≈).

== Точное положение ==
Положение считается точным если оно было получено менее чем 1 минуту назад и определено точнее 20 метров. Если положение не определено, то оно считается неточным.

== Частота обновления ==
Частота обновления устанавливается в настройках.
При приближении к тайнику ближе чем на 100 метров включается режим максимально частого обновления.

== Направление (компас) == 
Используемый датчик указывается в настройках.
При скорости выше 25 км/ч используется информация от gps 
не зависимо от настроек.